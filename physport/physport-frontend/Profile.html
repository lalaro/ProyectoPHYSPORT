<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Login</title>
    <link rel="stylesheet" href="css/style_profile.css">
</head>
<body>
    <div class="profile-box">
        <h1>Perfil Usuario</h1>
        <form id="profileForm" onsubmit="loginUser(event)">
            <!-- Nombre Usuario -->
            <p><label for="Perfil">Perfil Usuario</label></p>
            <div class="imgProfile-box">
                <img src="img/profile.png" width="70%" title="Logo">
                <div class="info-container">
                    <label for="username">Usuario</label>
                    <input type="text" id="username" name="username" readonly>
                    <br><br>
                    <label for="info">Información Usuario</label>
                    <input type="text" id="info" name="info" readonly>
                </div>
            </div>
            <hr>
            <p><label for="Progress">Progreso</label></p>
            <div class="img-box">
                <img src="img/presentation.png" width="70%" title="Logo">
                <div class="recuadro">
                    <label for="Progress_lab">Análisis de estadísticas.</label>
                    <br><br>
                    <label for="ejercicios">Ejercicios</label>
                    <input type="text" id="routines" name="routines" readonly>
                    <br><br>
                    <label for="meals">Comidas</label>
                    <input type="text" id="meals" name="meals" readonly>
                </div>
            </div>
            
            <input type="button" value="Continuar" onclick="redirectToPage()">

        </form>

    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            var storedUser = JSON.parse(localStorage.getItem("user"));
            if (storedUser) {
                document.getElementById("username").value = storedUser.username;
                document.getElementById("info").value = storedUser.gender || 'No disponible';
            } else {
                alert("No se encontró información del usuario.");
            }

            var routines = JSON.parse(localStorage.getItem('routines'));
            var meals = JSON.parse(localStorage.getItem('meals'));
            
            if (routines) {
                var routineCount = routines.length || 0; // Contar rutinas
                document.getElementById("routines").value = routineCount + " ejercicios";
            } else {
                document.getElementById("routines").value = "0 ejercicios";
            }

            if (meals) {
                var mealCount = meals.length || 0; // Contar comidas
                document.getElementById("meals").value = mealCount + " comidas";
            } else {
                document.getElementById("meals").value = "0 comidas";
            }
        });

        function redirectToPage() {
            window.location.href = "Exercise.html"; 
        }
    </script>
    
</body>
</html>
